<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.xmsy.server.zxyy.manager.modules.manager.proxytransferrecord.dao.ProxyTransferRecordDao">

	<!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="com.xmsy.server.zxyy.manager.modules.manager.proxytransferrecord.entity.ProxyTransferRecordEntity" id="proxyTransferRecordMap">
        <result property="id" column="id"/>
        <result property="createTime" column="create_time"/>
        <result property="updateTime" column="update_time"/>
        <result property="deleteStatus" column="delete_status"/>
        <result property="version" column="version"/>
        <result property="userId" column="user_id"/>
        <result property="userAccount" column="user_account"/>
        <result property="userName" column="user_name"/>
        <result property="orderNo" column="order_no"/>
        <result property="transferCoin" column="transfer_coin"/>
        <result property="proxyId" column="proxy_id"/>
    </resultMap>
<!-- 通过时间,代理商id  获取划拨总数量（stransferNum） ） 划拨总金币（transferCoin）-->
	<select id="sumTransferMoneyAmount"
		resultType="Map">
		SELECT
		COUNT(*) as stransferNum,
		sum(transfer_coin) AS transferCoin
		FROM proxy_transfer_record
		WHERE delete_status = 0
		<if test="startDate !=null and startDate!=''">
			AND date_format(create_time, '%Y-%m-%d') &gt;= #{startDate}
		</if>
		<if test="endDate !=null and endDate!=''">
			AND date_format(create_time, '%Y-%m-%d') &lt;= #{endDate}
		</if>
		<if test="proxyId !=null">
			AND proxy_id=#{proxyId};
		</if>
	</select>

</mapper>